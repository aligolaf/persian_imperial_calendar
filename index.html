<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تقویم شاهنشاهی ایرانی</title>
  <script src="https://cdn.jsdelivr.net/npm/persian-date@1.1.0/dist/persian-date.min.js"></script>
  <style>
    body {
      font-family: 'Vazir', Arial, sans-serif;
      background: linear-gradient(135deg, #e0eafc, #cfdef3);
      margin: 0;
      padding: 20px;
      min-height: 100vh;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      text-align: center;
      backdrop-filter: blur(5px);
      position: relative;
    }
    .farvahar-logo {
      position: absolute;
      top: 20px;
      left: 20px;
      width: 80px;
      opacity: 0.2;
      transition: opacity 0.3s;
    }
    .container:hover .farvahar-logo {
      opacity: 0.5;
    }
    h1 {
      color: #2c3e50;
      margin-bottom: 20px;
      font-size: 2.5em;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
    }
    .nav-buttons {
      margin-bottom: 20px;
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    .nav-buttons button {
      padding: 12px 25px;
      font-size: 16px;
      background: linear-gradient(90deg, #3498db, #2980b9);
      color: white;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      transition: transform 0.2s, background 0.3s;
    }
    .nav-buttons button:hover {
      transform: scale(1.05);
      background: linear-gradient(90deg, #2980b9, #1e6b9c);
    }
    .current-month {
      font-size: 1.5em;
      color: #34495e;
      margin-bottom: 15px;
      font-weight: bold;
    }
    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
      text-align: center;
      padding: 15px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      animation: fadeIn 0.5s ease-in;
    }
    .day {
      padding: 12px;
      background-color: #ecf0f1;
      border-radius: 10px;
      transition: transform 0.2s, background-color 0.3s;
      cursor: pointer;
    }
    .day:hover {
      transform: scale(1.1);
      background-color: #d5d8dc;
    }
    .day.today {
      background: linear-gradient(135deg, #e74c3c, #c0392b);
      color: white;
      font-weight: bold;
    }
    .day.event {
      background: linear-gradient(135deg, #27ae60, #2ecc71);
      color: white;
    }
    .day-header {
      font-weight: bold;
      padding: 12px;
      background: linear-gradient(90deg, #3498db, #2980b9);
      color: white;
      border-radius: 10px;
    }
    #convertedDate {
      margin-top: 20px;
      font-size: 1.2em;
      color: #2c3e50;
      padding: 10px;
      background: #f9f9f9;
      border-radius: 5px;
    }
    .error {
      color: #e74c3c;
      font-size: 14px;
      margin-top: 10px;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="https://charmnegar.com/wp-content/uploads/2018/08/%D9%81%D8%B1%D9%88%D9%87%D8%B1.jpg" alt="Farvahar Logo" class="farvahar-logo">
    <h1>تقویم شاهنشاهی ایرانی</h1>
    <div class="current-month" id="currentMonth"></div>
    <div class="nav-buttons">
      <button onclick="changeWeek(-1)">هفته قبل</button>
      <button onclick="changeMonth(-1)">ماه قبل</button>
      <button onclick="changeMonth(1)">ماه بعد</button>
      <button onclick="changeWeek(1)">هفته بعد</button>
    </div>
    <div id="calendar" class="calendar"></div>
    <input type="date" id="gregorianDate" />
    <button onclick="convertDate()">تبدیل به شاهنشاهی</button>
    <p id="convertedDate"></p>
    <p id="errorMessage" class="error"></p>
  </div>

  <script>
    // نام‌های ماه‌ها و روزهای هفته
    const persianMonths = [
      "فروردین", "اردیبهشت", "خرداد", "تیر", "مرداد", "شهریور",
      "مهر", "آبان", "آذر", "دی", "بهمن", "اسفند"
    ];
    const weekDays = ["یک‌شنبه", "دوشنبه", "سه‌شنبه", "چهارشنبه", "پنج‌شنبه", "جمعه", "شنبه"];

    // رویدادهای تاریخی ایران باستان (بر اساس سال شاهنشاهی)
    const historicalEvents = {
      1: "تاج‌گذاری کوروش کبیر، بنیان‌گذاری هخامنشیان (۵۵۹ ق.م.)",
      10: "کوروش امپراتوری هخامنشی را بنیان گذاشت (۵۵۰ ق.م.)",
      21: "کوروش بابل را فتح کرد (۵۳۹ ق.م.)",
      35: "کمبوجیه مصر را فتح کرد (۵۲۵ ق.م.)",
      38: "داریوش اول به سلطنت رسید (۵۲۲ ق.م.)",
      70: "جنگ ماراتن در جنگ‌های یونانی-پارسی (۴۹۰ ق.م.)",
      80: "جنگ سالامیس (۴۸۰ ق.م.)",
      229: "اسکندر داریوش سوم را شکست داد، پایان هخامنشیان (۳۳۱ ق.م.)",
      313: "ارشک اول امپراتوری اشکانی را بنیان گذاشت (۲۴۷ ق.م.)",
      507: "جنگ کاره، شکست رومیان توسط اشکانیان (۵۳ ق.م.)",
      783: "اردشیر اول امپراتوری ساسانی را بنیان گذاشت (۲۲۴ م.)",
      819: "شاپور اول والریان رومی را اسیر کرد (۲۶۰ م.)",
      922: "پیمان ۳۶۳ (۳۶۳ م.)",
      1090: "خسرو اول به سلطنت رسید (۵۳۱ م.)",
      1161: "جنگ خسرو دوم با بیزانس (۶۰۲ م.)"
    };

    // رویدادهای ملی باستانی (جشن‌ها بر اساس ماه-روز)
    const nationalEvents = {
      "1-1": "عید نوروز (جشن آغاز سال نو، جشن بهار)",
      "1-13": "سیزده به در (جشن طبیعت و شادی)",
      "1-19": "فروردینگان (جشن بزرگداشت فروهرها)",
      "2-3": "اردیبهشگان (جشن پاکی و نیکی)",
      "3-6": "خردادگان (جشن خرد و دانایی)",
      "4-13": "تیرگان (جشن باران و برکت)",
      "5-7": "امردادگان (جشن جاودانگی)",
      "6-4": "شهریورگان (جشن عدالت)",
      "7-16": "مهرگان (جشن دوستی و مهر)",
      "8-10": "آبانگان (جشن آب و پاکیزگی)",
      "9-9": "آذرگان (جشن آتش و نور)",
      "9-30": "شب یلدا (جشن پیروزی نور بر تاریکی)",
      "10-1": "دیگان (جشن استقامت)",
      "11-2": "بهمنگان (جشن نیکوکاری)",
      "11-10": "جشن سده (جشن آتش و گرما)",
      "12-5": "سپندارمذگان (جشن زمین و عشق)",
      "12-29": "چهارشنبه سوری (جشن آتش و شادی)",
      "12-30": "چهارشنبه سوری (جشن آتش و شادی)"
    };

    let currentDate = new Date(); // تاریخ فعلی (16 سپتامبر 2025)

    // نمایش ماه جاری
    function updateMonthDisplay() {
      const pDate = new persianDate(currentDate);
      const monthName = persianMonths[pDate.month() - 1];
      const year = pDate.year() + 1180;
      const gregorianDate = currentDate.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
      document.getElementById("currentMonth").textContent = `${monthName} ${year} (میلادی: ${gregorianDate})`;
    }

    // رندر تقویم هفتگی
    function renderCalendar() {
      const calendar = document.getElementById("calendar");
      calendar.innerHTML = "";

      // سرستون روزهای هفته
      weekDays.forEach(day => {
        const dayHeader = document.createElement("div");
        dayHeader.className = "day day-header";
        dayHeader.textContent = day;
        calendar.appendChild(dayHeader);
      });

      // محاسبه شروع هفته (یکشنبه)
      const startOfWeek = new Date(currentDate);
      startOfWeek.setDate(currentDate.getDate() - currentDate.getDay()); // یکشنبه هفته
      for (let i = 0; i < 7; i++) {
        const date = new Date(startOfWeek);
        date.setDate(startOfWeek.getDate() + i);
        const pDate = new persianDate(date);
        const pYear = pDate.year();
        const pMonth = pDate.month();
        const pDay = pDate.date();
        const shahanshahiYear = pYear + 1180;
        const monthName = persianMonths[pMonth - 1];
        const gregorian = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        const dayElement = document.createElement("div");
        dayElement.className = "day";
        if (date.toDateString() === new Date().toDateString()) dayElement.className += " today";
        const eventKey = `${pMonth}-${pDay}`;
        if (nationalEvents[eventKey] || Object.keys(historicalEvents).includes(String(shahanshahiYear))) dayElement.className += " event";
        dayElement.innerHTML = `${pDay} ${monthName} ${shahanshahiYear}<br><small>(${gregorian})<br>${nationalEvents[eventKey] || (historicalEvents[shahanshahiYear] ? historicalEvents[shahanshahiYear] : "")}</small>`;
        calendar.appendChild(dayElement);
      }
      updateMonthDisplay();
    }

    // جابه‌جایی هفته
    function changeWeek(weeks) {
      currentDate.setDate(currentDate.getDate() + weeks * 7);
      renderCalendar();
    }

    // جابه‌جایی ماه
    function changeMonth(months) {
      currentDate.setMonth(currentDate.getMonth() + months);
      renderCalendar();
    }

    // تبدیل تاریخ ورودی به شاهنشاهی
    function convertDate() {
      const errorMessage = document.getElementById("errorMessage");
      errorMessage.innerText = "";
      const input = document.getElementById("gregorianDate").value;
      if (!input) {
        errorMessage.innerText = "لطفاً تاریخ را وارد کنید!";
        return;
      }

      const [year, month, day] = input.split('-').map(Number);
      const date = new Date(year, month - 1, day);
      if (isNaN(date.getTime())) {
        errorMessage.innerText = "تاریخ واردشده نامعتبر است!";
        return;
      }

      const pDate = new persianDate(date);
      const pYear = pDate.year();
      const pMonth = pDate.month();
      const pDay = pDate.date();
      const shahanshahiYear = pYear + 1180;
      const monthName = persianMonths[pMonth - 1];
      const convertedDate = document.getElementById("convertedDate");
      const eventKey = `${pMonth}-${pDay}`;
      const historicalEvent = historicalEvents[shahanshahiYear] || "";
      const nationalEvent = nationalEvents[eventKey] || "";
      convertedDate.innerHTML = `تبدیل: ${pDay} ${monthName} ${shahanshahiYear}<br><small>${historicalEvent}${nationalEvent ? (historicalEvent ? "<br>" : "") + nationalEvent : ""}</small>`;
    }

    // رندر اولیه
    window.onload = renderCalendar;
  </script>
</body>
</html>